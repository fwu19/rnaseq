/*
========================================================================================
    FLOW SWITCH
========================================================================================
*/

params {
    workflow = 'regular'
    
    only_ref = false
    only_input = false
    only_merge_fastq = false
    only_split_fastq = false
    only_filter_fastq = false
    only_alignment = false

    run_make_index = false
    run_input_check = true
    run_cut_adapt = true
    run_cat_fastq = false
    run_split_fastq = false

    run_alignment = true
    run_featurecounts = false
    run_gene_count = true
    run_de = true

    run_salmon = false
    run_tx_count = false
    run_dt = false

    run_arriba = false

    run_qc = true
    run_fastqc = true
    run_rnaseqc = true
    run_rseqc = true
    run_hs_metrics = false
    run_samtools = false
    run_multiqc = true
    
    run_report = true

}    


if (params.workflow == 'exome' ){
    params.run_hs_metrics = true
}

if (params.workflow == 'pdx' ){
    params.run_featurecounts = true
    params.run_samtools = true
}


if (params.only_ref){
    params.run_input_check = false
    params.run_cat_fastq = false
    params.run_cut_adapt = false
    params.run_split_fastq = false
    params.run_alignment = false
    params.run_featurecounts = false
    params.run_gene_count = false
    params.run_de = false
    params.run_salmon = false
    params.run_dt = false
    params.run_arriba = false
    params.run_tx_count = false
    params.run_qc = false
    params.run_fastqc = false
    params.run_rnaseqc = false
    params.run_rseqc = false
    params.run_hs_metrics = false
    params.run_samtools = false
    params.run_multiqc = false
    params.run_report = false

}

if (params.only_input){
    params.run_make_index = false
    params.run_cat_fastq = false
    params.run_cut_adapt = false
    params.run_split_fastq = false
    params.run_alignment = false
    params.run_featurecounts = false
    params.run_gene_count = false
    params.run_de = false
    params.run_salmon = false
    params.run_dt = false
    params.run_arriba = false
    params.run_tx_count = false
    params.run_qc = false
    params.run_fastqc = false
    params.run_rnaseqc = false
    params.run_rseqc = false
    params.run_hs_metrics = false
    params.run_samtools = false
    params.run_multiqc = false
    params.run_report = false

}

if (params.only_merge_fastq){
    params.run_make_index = false
    params.run_cat_fastq = true
    params.run_cut_adapt = false
    params.run_split_fastq = false
    params.run_alignment = false
    params.run_featurecounts = false
    params.run_gene_count = false
    params.run_de = false
    params.run_salmon = false
    params.run_dt = false
    params.run_arriba = false
    params.run_tx_count = false
    params.run_qc = false
    params.run_fastqc = false
    params.run_rnaseqc = false
    params.run_rseqc = false
    params.run_hs_metrics = false
    params.run_samtools = false
    params.run_multiqc = false
    params.run_report = false

}

if (params.only_split_fastq){
    params.run_make_index = false
    params.run_cat_fastq = false
    params.run_cut_adapt = false
    params.run_split_fastq = true
    params.run_alignment = false
    params.run_featurecounts = false
    params.run_gene_count = false
    params.run_de = false
    params.run_salmon = false
    params.run_dt = false
    params.run_arriba = false
    params.run_tx_count = false
    params.run_qc = false
    params.run_fastqc = false
    params.run_rnaseqc = false
    params.run_rseqc = false
    params.run_hs_metrics = false
    params.run_samtools = false
    params.run_multiqc = false
    params.run_report = false

}

if (params.only_filter_fastq){
    params.run_featurecounts = false
    params.run_gene_count = false
    params.run_de = false
    params.run_salmon = false
    params.run_dt = false
    params.run_arriba = false
    params.run_tx_count = false
    params.run_hs_metrics = false

}

if (params.only_alignment){
    params.run_featurecounts = false
    params.run_gene_count = false
    params.run_de = false
    params.run_salmon = false
    params.run_dt = false
    params.run_arriba = false
    params.run_tx_count = false
    params.run_qc = false
    params.run_fastqc = false
    params.run_rnaseqc = false
    params.run_rseqc = false
    params.run_hs_metrics = false
    params.run_samtools = false
    params.run_multiqc = false
    params.run_report = false

}

if (!params.run_gene_count){
    params.run_de = false
}

if (params.run_salmon){
    params.run_tx_count = true
}

if (!params.run_salmon || !params.run_tx_count){
    params.run_dt = false
}

if (params.run_dt){
    params.run_tx_count = true
}

if (!params.run_qc) {
    params.run_fastqc = false
    params.run_rnaseqc = false
    params.run_rseqc = false
    params.run_hs_metrics = false
    params.run_samtools = false
    params.run_multiqc = false
    params.run_report = false

}

