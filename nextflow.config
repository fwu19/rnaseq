workDir = '/hpc/temp/_SR/Genomics/users/nextflow/rnaseq/work'

singularity {
    enabled = true
    autoMounts = true
    cacheDir = '/fh/fast/_SR/Genomics/proj/fwu/nextflow/cache'
    runOptions = '--containall --no-home --bind \${SINGULARITY_TMPDIR}:/hpc/temp/_SR/Genomics/users/nextflow/cache'
    pullTimeout = '60 min'
    tmp = 'auto'
}

process {
    executor = 'slurm'
    queue = 'campus-new'
	errorStrategy = 'retry'
	maxRetries = 3
}

report {
    enabled = true
    file = "nextflow_report.html"
    overwrite = true
}

env {
	MPLCONFIGDIR = '/hpc/temp/_SR/Genomics/users/nextflow/cache'
    SINGULARITY_TMPDIR = '/hpc/temp/_SR/Genomics/users/nextflow/cache'
    TMPDIR = '/hpc/temp/_SR/Genomics/users/nextflow/cache'
    R_LIBS = '/fh/fast/_SR/Genomics/proj/fwu/R/4.1' 
}




/*
* Default params
*/
params {
    input = null
    metadata = null
    outdir = './Analysis/'

    publish_dir_mode = 'copy'

    run_input_check = true
    run_cat_fastq = true
    run_alignment = true
    run_featurecounts = false
    run_qc = true
    run_fastqc = true
    run_rnaseqc = true
    run_rseqc = true
    run_hs_metrics = false
    run_multiqc = true
    run_de = false
    run_report = true
    
    only_input = false
    only_alignment = false
    
    workflow = 'regular'
}    

// Load base.config by default for all pipelines
includeConfig "conf/base.config"

// Load flowswitch.config
includeConfig "conf/flowswitch.config"

// Load modules.config for DSL2 module specific options
//includeConfig 'conf/modules.config'

/*
*
*/
// Capture exit codes from upstream processes when piping
process.shell = ["/bin/bash", "-euo", "pipefail"]

timeline {
    enabled = true
    file    = "${params.outdir}/pipeline_info/execution_timeline.html"
    overwrite = true
}

report {
    enabled = true
    file    = "${params.outdir}/pipeline_info/execution_report.html"
    overwrite = true
}

trace {
    enabled = true
    file    = "${params.outdir}/pipeline_info/execution_trace.txt"
    overwrite = true
}

dag {
    enabled = true
    file    = "${params.outdir}/pipeline_info/pipeline_dag.html"
    overwrite = true
}

