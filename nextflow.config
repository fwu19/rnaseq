
/*
* Default params
*/
params {
    // input/output
    input = "$projectDir/assets/dummy_file.csv"
    metadata = "$projectDir/assets/dummy_file.csv"
    input_dir = "$projectDir/assets/dummy_dir/"
    comparison = null
    workflow = 'regular' // exome,pdx
    
    outdir = './Analysis/'

    publish_dir_mode = 'copy'
    save_reference = true // save output from processing gtf

    tools = "cutadapt,fastp,fastqc,rnaseqc,rseqc,star,bwa-mem,salmon,arriba" // fastqc,rnaseqc,rseqc,star,bwa-mem,salmon,arriba
    skip_tools = "none"

    // pipeline options
    step = "mapping" // expression_quantification, differential_expression
    
    gene_level = true
    transcript_expression = false
    gene_fusion = false

    trimmer = 'fastp' // cutadapt,fastp
    cat_fastq = true // will cat fastq if multiple fastq per sample
    split_fastq = false
    
    // references
    aligner_index = null // can be multiple separated by comma
    aligner = 'star'
    star = null
    star_host = null
    bwa = null
    bwa_host = null

    genome = 'target_genome'
    genome_fa = null
    gtf = null
    rnaseqc_gtf = null
    rseqc_bed = null
    gene_txt = null
    tx_bed = null
    tx_fa = null
    tx_txt = null

    genome_host = 'host_genome'
    genome_fa_host = null

    // parameters
    split_size = 50000000
    fdr = 0.05
    fc = 1.5
    fdr2 = 0.01
    fc2 = 2
    length_col = "gene_length"
    de_gene_txt = null
    de_gene_type = 'all'

    sjdbOverhang = null
    outSAMattributes = "NH HI NM MD AS XS"
    genomeSAindexNbases = null
    multiqc_config = null

    r1_pattern = '_S[0-9]+\\(_L[0-9]+\\)?_R1_' // double escape
    r2_pattern = '_S[0-9]+\\(_L[0-9]+\\)?_R2_' // double escape
    adapters = null
}    

// Load base.config by default for all pipelines
includeConfig "conf/base.config"

// Load flowswitch.config
includeConfig "conf/flowswitch.config"

// Load modules.config for DSL2 module specific options
includeConfig "conf/modules.config"

if (params.workflow == 'pdx' ){
    includeConfig "conf/pdx.config"
    if (params.run_split_fastq){
        includeConfig "conf/pdx_split.config"
    }
}

/*
*
*/
// Capture exit codes from upstream processes when piping
process.shell = ["/bin/bash", "-euo", "pipefail"]

timeline {
    enabled = true
    file    = "${params.outdir}/pipeline_info/execution_timeline.html"
    overwrite = true
}

report {
    enabled = true
    file    = "${params.outdir}/pipeline_info/execution_report.html"
    overwrite = true
}

trace {
    enabled = true
    file    = "${params.outdir}/pipeline_info/execution_trace.txt"
    overwrite = true
}

dag {
    enabled = true
    file    = "${params.outdir}/pipeline_info/pipeline_dag.html"
    overwrite = true
}

